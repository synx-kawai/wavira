# Mosquitto Access Control List (ACL) Configuration
# Controls topic access for different users/clients

# =============================================================================
# Pattern Substitutions
# =============================================================================
# %c = client id
# %u = username

# =============================================================================
# Admin User (full access)
# =============================================================================
user admin
topic readwrite #
topic readwrite $SYS/#

# =============================================================================
# ESP32 Devices (publish CSI data, subscribe to commands)
# =============================================================================
# Each device should have its own username matching its device_id
pattern write wavira/csi/%u
pattern write wavira/device/%u/#
pattern read wavira/command/%u/#
pattern read wavira/config/%u

# =============================================================================
# Backend Services (full wavira/# access)
# =============================================================================
user csi_processor
topic read wavira/csi/#
topic write wavira/analysis/#
topic readwrite wavira/device/#

user history_collector
topic read wavira/#

# =============================================================================
# Dashboard (read-only access)
# =============================================================================
user dashboard
topic read wavira/#

# =============================================================================
# Anonymous Access (if enabled)
# =============================================================================
# Only allow reading public topics
# topic read wavira/public/#
