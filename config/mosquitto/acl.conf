# Mosquitto ACL Configuration
# Controls topic access per user/pattern

# =============================================================================
# Server (history-collector, csi-processor)
# =============================================================================
user wavira-server
topic read wavira/csi/#
topic read wavira/device/+/status
topic read wavira/device/+/will
topic write wavira/analysis/#
topic write wavira/status/#
topic write wavira/device/+/ota

# =============================================================================
# Dashboard (read-only access)
# =============================================================================
user wavira-dashboard
topic read wavira/analysis/#
topic read wavira/status/#
topic read $SYS/#

# =============================================================================
# ESP32 Devices (pattern-based)
# Device can only publish to its own topics
# =============================================================================
pattern write wavira/csi/%u
pattern write wavira/device/%u/status
pattern read wavira/device/%u/ota
pattern read wavira/device/%u/ota/+

# =============================================================================
# Anonymous users (development only, disabled in production)
# =============================================================================
# topic read #
# topic write #
